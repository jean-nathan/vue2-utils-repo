# üß† Explica√ß√£o geral

Voc√™ criou uma aplica√ß√£o que:
- Tem uma p√°gina onde o usu√°rio pode clicar em **links de CEPs**.
- Quando o usu√°rio clica em um link, o app **busca o endere√ßo daquele CEP** na internet (ViaCEP).
- Depois, **mostra os dados** na tela ‚Äî **sem precisar recarregar** toda a p√°gina.

Agora vamos por partes, **com foco na import√¢ncia do `beforeRouteUpdate`**!

---

# üìÅ Arquivo: `router.js`

## C√≥digo:
```javascript
path: "/cep",
component: CepPage,
props: true,
children: [
  {
    name: "dadoscep",
    path: ":dadoscep",
    component: DadosCep,
    props: true
  }
]
```

## Explica√ß√£o:
- `path: "/cep"`: rota principal onde os links de CEPs v√£o aparecer.
- `children: [...]`: define uma **rota filha** que recebe o n√∫mero do CEP dinamicamente.
- `path: ":dadoscep"`: o valor do CEP √© capturado pela URL.
- `props: true`: o n√∫mero do CEP √© enviado como **prop** para o componente `DadosCep`.

---

# üìÑ Arquivo: `CepPage.vue`

## C√≥digo:
```vue
<template>
  <div>
    <h1>Buscando endere√ßo pelo CEP</h1>
    <router-link :to="{name: 'dadoscep', params: {dadoscep: '01419002'} }">Cerqueira C√©sar</router-link>
    <router-link :to="{name: 'dadoscep', params: {dadoscep: '01153000'} }">Barra Funda</router-link>
    <router-view></router-view>
  </div>
</template>
```

## Explica√ß√£o:
- `<router-link>`: cria links que **mudam a rota** sem recarregar a p√°gina inteira.
- `:to="{name: 'dadoscep', params: {dadoscep: '01419002'}}"`: informa qual CEP deve ser buscado.
- `<router-view>`: √© o espa√ßo reservado onde o conte√∫do do `DadosCep` vai aparecer.

---

# üìÑ Arquivo: `DadosCep.vue`

## Template (visualiza√ß√£o dos dados)
```vue
<template>
  <div>
    <h1>Dados do CEP</h1>
    <ul>
      <li v-for="(endereco, index) in cepData" :key="index">
        <span>{{ `${index}: ${endereco}` }}</span>
      </li>
    </ul>
  </div>
</template>
```

- Exibe a lista de informa√ß√µes do endere√ßo buscado.

---

# üìú Script (l√≥gica)

## Principais trechos:

### 1. Recebendo dados e configurando vari√°veis
```javascript
props: ["dadoscep"],
data() {
  return {
    cepData: ''
  }
},
```
- O n√∫mero do CEP √© recebido da URL.
- Os dados do endere√ßo ser√£o armazenados na vari√°vel `cepData`.

---

### 2. Buscando dados quando a p√°gina √© criada
```javascript
created() {
  this.pullDataCep(this.dadoscep);
},
```
- Quando a p√°gina carrega pela primeira vez, ela **busca os dados do CEP** recebido.

---

### 3. Fun√ß√£o para buscar dados do CEP
```javascript
methods: {
  pullDataCep(dadoscep) {
    fetch(`https://viacep.com.br/ws/${dadoscep}/json/`)
      .then(response => response.json())
      .then(data => {
        const filteredData = Object.entries(data).reduce((acc, [key, value]) => {
          if (value !== '') {
            acc[key] = value;
          }
          return acc;
        }, {});
        this.cepData = filteredData;
      })
      .catch(error => alert(error));
  }
}
```
- Busca o endere√ßo pela API ViaCEP.
- Filtra para exibir apenas campos preenchidos.
- Atualiza a tela com os dados.

---

# üõë O ponto mais importante: `beforeRouteUpdate`

```javascript
beforeRouteUpdate(to, from, next) {
  this.pullDataCep(to.params.dadoscep)
  next()
}
```

### Por que isso √© ESSENCIAL?

üî¥ **Problema sem o `beforeRouteUpdate`:**
- Quando voc√™ clica em outro link de CEP **a p√°gina n√£o √© destru√≠da e recriada**.
- Como o componente `DadosCep` **j√° est√° carregado**, o Vue **n√£o chama de novo o `created()`**.
- Resultado: **a tela ficaria parada**, sem buscar o novo CEP.

---

‚úÖ **Solu√ß√£o com `beforeRouteUpdate`:**
- O `beforeRouteUpdate` √© um **hook especial do Vue Router** que:
  - Escuta **quando a URL muda** dentro do mesmo componente.
  - Permite que voc√™ **reaja √† mudan√ßa** manualmente.
- Aqui, voc√™ chama `this.pullDataCep(to.params.dadoscep)`, puxando os dados do novo CEP.
- Assim, **atualiza o conte√∫do na hora**, mesmo sem recarregar a p√°gina.

---

# üéØ Resumo final (foco no navigation hook)

| Sem `beforeRouteUpdate` | Com `beforeRouteUpdate` |
|:------------------------|:------------------------|
| Clicaria nos links, mas os dados **n√£o mudariam**. | Clicando nos links, **novos dados s√£o buscados e exibidos** automaticamente. |
| A tela ficaria "travada" no primeiro CEP. | Tela atualiza certinha conforme voc√™ navega pelos CEPs. |
| N√£o teria a experi√™ncia flu√≠da de SPA. | Experi√™ncia de aplica√ß√£o moderna e r√°pida, como se fosse um app nativo. |

---

# üöÄ Conclus√£o r√°pida

- **O `beforeRouteUpdate` √© vital** para apps Vue que precisam reagir √† mudan√ßa de par√¢metros **sem recarregar a p√°gina**.
- Sem ele, seu sistema **n√£o atualizaria os dados ao trocar de rota**.
- Usar esse hook faz seu app parecer **mais r√°pido, inteligente e moderno**!
